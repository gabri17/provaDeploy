{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from '@/router';\nimport logoLinkHome from '@/components/logoLinkHome';\nexport default {\n  components: {\n    logoLinkHome\n  },\n  data: () => ({\n    step: 1,\n    valid: false,\n    erroreRegistrazione: false,\n    accountCreato: false,\n    datiAuth: {},\n    error: false,\n    username: '',\n    password: '',\n    password1: '',\n    email: '',\n    nome: '',\n    cognome: '',\n    dob: '',\n    indirizzo: '',\n    metodiPagamento: '',\n    url: 'http://localhost:8080/',\n    required: [v => !!v || 'Campo obbligatorio'],\n    emailRules: [v => /^(([^<>()[\\]\\\\.,;:\\s@']+(\\.[^<>()\\\\[\\]\\\\.,;:\\s@']+)*)|('.+'))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(v) || 'E-mail non valida.'],\n    passwordCrit: [v => v.length >= 8 && v.match(/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/) || 'Password non valida!']\n  }),\n  props: {\n    source: String\n  },\n  methods: {\n    passwordMatching() {\n      if (this.password === this.password1) {\n        return true;\n      } else {\n        return \"Le password non combaciano!\";\n      }\n    },\n    async handleSubmit() {\n      try {\n        fetch(this.url + \"api/u/signUp\", {\n          method: 'POST',\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            username: this.username,\n            password: this.password,\n            nome: this.nome,\n            cognome: this.cognome,\n            datadinascita: this.dob,\n            indirizzo: this.indirizzo,\n            email: this.email\n          })\n        }).then(resp => resp.json()).then(data => {\n          console.log(data);\n          if (data.success === false) {\n            this.message = data.message;\n            this.erroreRegistrazione = true;\n            return;\n          }\n          this.accountCreato = true;\n          this.step = 1;\n          //this.$refs.form.reset();\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async login() {\n      //console.log(this.username, \" \", this.password)\n      try {\n        fetch(this.url + \"api/l/signIn\", {\n          method: 'POST',\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            username: this.username,\n            password: this.password\n          })\n        }).then(resp => resp.json()).then(data => {\n          // Here you get the data to modify as you please\n          this.$store.commit('autenticazione', data /*{ dataAuth: data, username: this.username }*/);\n          if (data.success) {\n            console.log(data);\n            router.push(\"/\");\n          } else {\n            this.error = true;\n          }\n          this.message = data.message;\n          console.log(data.message);\n        }).then(this.getUser());\n      } catch (error) {\n        console.error(error); // If there is any error you will catch them here\n      }\n    },\n\n    async getUser() {\n      try {\n        console.log(this.url + \"api/u/getu/\" + this.username);\n        fetch(this.url + \"api/u/getu/\" + this.username, {\n          method: 'GET',\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(resp => resp.json()).then(data => {\n          this.$store.commit('prendiDatiUtente', data);\n          console.log(data);\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  },\n  mounted() {\n    this.$store.state.loginupForms = true;\n  }\n};","map":{"version":3,"mappings":";AAoHA;AACA;AAEA;EACAA;IAAAC;EAAA;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC,WACAC,iCACA;IACAC,aACAD,+LACA;IACAE,eACAF;EAEA;EACAG;IACAC;EACA;EACAC;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACA;MACA;QACAC;UACAC;UACAC;YAAA;UAAA;UACAC;YAAArB;YAAAC;YAAAG;YAAAC;YAAAiB;YAAAf;YAAAJ;UAAA;QACA,6BACAoB;UACAC;UACA;YACA;YACA;YACA;UACA;UACA;UACA;UACA;QACA;MACA;QACAA;MACA;IACA;IACA;MACA;MACA;QACAN;UACAC;UACAC;YAAA;UAAA;UACAC;YAAArB;YAAAC;UAAA;QACA,6BACAsB;UACA;UACA;UACA;YACAC;YACAC;UACA;YACA;UACA;UACA;UACAD;QACA;MACA;QACAA;MACA;IACA;;IACA;MACA;QACAA;QACAN;UACAC;UACAC;YAAA;UAAA;QACA,6BACAG;UACA;UACAC;QACA;MACA;QACAA;MACA;IACA;EAEA;EACAE;IACA;EACA;AACA","names":["components","logoLinkHome","data","step","valid","erroreRegistrazione","accountCreato","datiAuth","error","username","password","password1","email","nome","cognome","dob","indirizzo","metodiPagamento","url","required","v","emailRules","passwordCrit","props","source","methods","passwordMatching","fetch","method","headers","body","datadinascita","then","console","router","mounted"],"sourceRoot":"src/views","sources":["UserLoginSignUp.vue"],"sourcesContent":["<template>\n  <v-main id=\"inspire\">\n\n    <v-content>\n      <v-container class=\"fill-height\" fluid>\n        <v-row align=\"center\" justify=\"center\">\n          <v-col cols=\"12\" sm=\"8\" md=\"8\">\n            <v-row>\n              <div class=\"mx-auto pa-10\">\n                <logoLinkHome />\n              </div>\n            </v-row>\n            <v-card class=\"elevation-12\">\n              <v-window v-model=\"step\" class=\"spacing-playground pa-6\">\n                <v-window-item :value=\"1\">\n                  <v-row>\n                    <v-col cols=\"12\" md=\"8\">\n                      <v-card-text class=\"mt-12\">\n                        <h1 class=\"text-center display-2 accent--text\">Accedi a Spottythings</h1>\n                          <!-- @todo capire perchè non si disattiva il sign in -->\n                        <v-form ref=\"form\" class =\"submit\" v-model=\"valid\">\n                          <v-text-field label=\"Username\" name=\"username\" prepend-icon=\"person\" type=\"username\"\n                            color=\"accent\" v-model=\"username\" :rules=\"required\"/>\n\n                          <v-text-field id=\"password\" label=\"Password\" name=\"password\" prepend-icon=\"lock\"\n                            type=\"password\" color=\"accent\" v-model=\"password\" :rules=\"required\"/>\n                            <h3 class=\"text-center mt-4\">Forgot your password?</h3>\n                            <div class=\"text-center mt-3\">\n                              <v-btn class=\"submit\" rounded color=\"accent accent-3\" dark :disabled=\"!valid\" @click=\"login\" >SIGN IN</v-btn>\n                            </div>\n                          </v-form>\n                        </v-card-text>\n\n                      <v-container>\n                        <v-alert v-if=\"accountCreato\" type=\"success\" justify=\"center\">\n                          Registrazione avvenuta con successo!\n                        </v-alert>\n                        <v-alert v-if=\"error\" type=\"error\" justify=\"center\">\n                          {{ message }}\n                        </v-alert>\n                      </v-container>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" class=\"accent accent-3\">\n                      <v-card-text class=\"black--text mt-12\">\n                        <h3 class=\"text-center\">Non hai ancora un profilo?</h3>\n                      </v-card-text>\n                      <div class=\"text-center\">\n                        <v-btn rounded dark @click=\"step++\">SIGN UP</v-btn>\n                      </div>\n                    </v-col>\n                  </v-row>\n\n                </v-window-item>\n                <v-window-item :value=\"2\">\n                  <v-row class=\"fill-height\">\n                    <v-col cols=\"12\" md=\"4\" class=\"accent accent-3\">\n                      <v-card-text class=\"black--text mt-12\">\n\n                        <h3 class=\"text-center\">Hai già un profilo?</h3>\n                      </v-card-text>\n                      <div class=\"text-center\">\n                        <v-btn rounded dark @click=\"step--\">Sign in</v-btn>\n                      </div>\n                    </v-col>\n\n                    <v-col cols=\"12\" md=\"8\">\n                      <v-card-text class=\"mt-12 mb-0\">\n                        <h1 class=\"text-center display-2 accent--text text--accent-3\">Crea un Account</h1>\n\n\n                        <v-form v-model=\"valid\" class=\"submit\">\n                          <v-text-field v-model=\"username\" id=\"username\" label=\"Nome utente\" name=\"Username\"\n                            prepend-icon=\"person\" type=\"text\" color=\"accent accent-3\" :rules=\"required\" />\n                          <v-text-field v-model=\"nome\" id=\"nome\" label=\"Nome\" name=\"Nome\" prepend-icon=\"person\"\n                            type=\"text\" color=\"accent accent-3\" :rules=\"required\" />\n                          <v-text-field v-model=\"cognome\" id=\"cognome\" label=\"Cognome\" name=\"Cognome\"\n                            prepend-icon=\"person\" type=\"text\" color=\"accent accent-3\" :rules=\"required\" />\n                          <v-text-field v-model=\"dob\" id=\"dob\" label=\"Data di nascita\" name=\"DOB\"\n                            prepend-icon=\"mdi-calendar-blank\" type=\"date\" color=\"accent accent-3\" :rules=\"required\" />\n                          <v-text-field v-model=\"indirizzo\" id=\"indirizzo\" label=\"Indirizzo\" name=\"Indirizzo\"\n                            prepend-icon=\"map\" type=\"text\" color=\"accent accent-3\" :rules=\"required\" />\n                          <v-text-field v-model=\"email\" id=\"email\" label=\"Email\" name=\"Email\" prepend-icon=\"email\"\n                            type=\"email\" color=\"accent accent-3\" required :rules=\"emailRules\" />\n                          <v-text-field v-model=\"password\" id=\"password\"\n                            label=\"Password (almeno 8 lettere, 1 numero e un carattere speciale)\" name=\"Password\"\n                            prepend-icon=\"lock\" type=\"password\" color=\"accent accent-3\"\n                            :rules=\"required.concat(passwordCrit)\" />\n                          <v-text-field v-model=\"password1\" id=\"confirmPassword\" label=\"Confirm Password\"\n                            name=\"cPassword\" prepend-icon=\"lock\" type=\"password\" color=\"accent accent-3\"\n                            :rules=\"required.concat(passwordMatching)\" />\n                          <v-spacer></v-spacer>\n                          <v-btn class=\"submit\" rounded color=\"accent accent-3\" dark :disabled=\"!valid\"\n                            @click=\"handleSubmit\">Crea un Account</v-btn>\n                          <div class=\"text-center mt-n5\">\n                          </div>\n                        </v-form>\n                      </v-card-text>\n                      <v-spacer></v-spacer>\n                      <v-container>\n                        <v-alert v-if=\"erroreRegistrazione\" type=\"error\" justify=\"center\">\n                          {{ message }}\n                        </v-alert>\n                      </v-container>\n                    </v-col>\n                  </v-row>\n                </v-window-item>\n              </v-window>\n            </v-card>\n          </v-col>\n        </v-row>\n      </v-container>\n    </v-content>\n  </v-main>\n</template>\n\n<script>\nimport router from '@/router';\nimport logoLinkHome from '@/components/logoLinkHome';\n\nexport default {\n  components: { logoLinkHome },\n  data: () => ({\n    step: 1,\n    valid: false,\n    erroreRegistrazione: false,\n    accountCreato: false,\n    datiAuth: {},\n    error: false,\n    username: '',\n    password: '',\n    password1: '',\n    email: '',\n    nome: '',\n    cognome: '',\n    dob: '',\n    indirizzo: '',\n    metodiPagamento: '',\n    url:'http://localhost:8080/',\n    required: [\n      v => !!v || 'Campo obbligatorio'\n    ],\n    emailRules: [\n      v => /^(([^<>()[\\]\\\\.,;:\\s@']+(\\.[^<>()\\\\[\\]\\\\.,;:\\s@']+)*)|('.+'))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(v) || 'E-mail non valida.',\n    ],\n    passwordCrit: [\n      v => v.length >= 8 && v.match(/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/) || 'Password non valida!'\n    ]\n  }),\n  props: {\n    source: String\n  },\n  methods: {\n    passwordMatching() {\n      if (this.password === this.password1) {\n        return true;\n      } else {\n        return \"Le password non combaciano!\"\n      }\n    },\n    async handleSubmit() {\n      try {\n        fetch(this.url + \"api/u/signUp\", {\n          method: 'POST',\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ username: this.username, password: this.password, nome: this.nome, cognome: this.cognome, datadinascita: this.dob, indirizzo: this.indirizzo, email: this.email })\n        }).then((resp) => resp.json())\n          .then(data => {\n            console.log(data);\n            if (data.success === false) {\n              this.message = data.message;\n              this.erroreRegistrazione = true;\n              return;\n            }\n            this.accountCreato = true;\n            this.step = 1;\n            //this.$refs.form.reset();\n          })\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async login() {\n      //console.log(this.username, \" \", this.password)\n      try {\n        fetch(this.url + \"api/l/signIn\", {\n          method: 'POST',\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ username: this.username, password: this.password }),\n        }).then((resp) => resp.json())\n          .then(data => {\n            // Here you get the data to modify as you please\n          this.$store.commit('autenticazione', data/*{ dataAuth: data, username: this.username }*/);\n            if (data.success) {\n              console.log(data);\n              router.push(\"/\");\n            } else {\n              this.error = true\n            }\n            this.message = data.message;\n            console.log(data.message);\n          }).then(this.getUser())\n      } catch (error) {\n        console.error(error); // If there is any error you will catch them here\n      }\n    },\n    async getUser() {\n      try {\n        console.log(this.url + \"api/u/getu/\" + this.username);\n        fetch(this.url + \"api/u/getu/\" + this.username, {\n          method: 'GET',\n          headers: { \"Content-Type\": \"application/json\" }\n        }).then((resp) => resp.json())\n        .then(data => {\n          this.$store.commit('prendiDatiUtente', data);\n          console.log(data);\n        })\n      } catch(error) {\n        console.error(error); \n      }\n    }\n\n  },\n  mounted() {\n    this.$store.state.loginupForms = true;\n  },\n};\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}