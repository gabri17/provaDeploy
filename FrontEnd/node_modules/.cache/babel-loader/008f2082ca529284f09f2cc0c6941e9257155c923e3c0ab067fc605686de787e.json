{"ast":null,"code":"export default {\n  data() {\n    return {\n      annunciUtente: []\n    };\n  },\n  computed: {},\n  methods: {\n    async getAnnunciUtente() {\n      try {\n        fetch(this.$url + \"api/a/getau/\" + this.$store.state.datiUtente.username, {\n          method: 'GET',\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(resp => resp.json()).then(data => {\n          this.annunciUtente = data;\n          console.log(data);\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async aggiornaVisbilita(annuncio, visibilePassato) {\n      try {\n        fetch(this.$url + \"api/a/updatea\", {\n          method: 'PATCH',\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-access-token\": this.$store.state.dataAuth.token\n          },\n          body: JSON.stringify({\n            titolo: annuncio.titolo,\n            visibile: visibilePassato\n          })\n        }).then(() => {\n          console.log(\"Visibilià aggiornata per \", annuncio.titolo, \"!\");\n          this.contaAnnunciOnline(this.$store.state.datiUtente.username);\n          this.getProfile();\n        });\n      } catch (error) {\n        console.error(error); // If there is any error you will catch them here\n      }\n    },\n\n    async elimina(annuncio) {\n      try {\n        fetch(this.$url + \"api/a/deletea/\" + annuncio.titolo, {\n          method: 'DELETE',\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n          // body: JSON.stringify({ id: id }),\n        }).then(() => {\n          console.log(\"Annuncio con titolo\", annuncio.titolo, \" è stato eliminato!\");\n          this.contaAnnunciOnline(this.$store.state.datiUtente.username);\n          this.getProfile();\n        });\n      } catch (error) {\n        console.error(error); // If there is any error you will catch them here\n      }\n    }\n  },\n\n  updated() {\n    this.getAnnunciUtente();\n  },\n  created() {\n    this.getAnnunciUtente();\n  }\n};","map":{"version":3,"mappings":"AAoDA;EACAA;IACA;MACAC;IACA;EACA;EACAC,WAEA;EACAC;IACA;MACA;QACAC;UACAC;UACAC;YAAA;UAAA;QACA,6BACAC;UACA;UACAC;QACA;MACA;QACAA;MACA;IACA;IACA;MACA;QACAJ;UACAC;UACAC;YACA;YACA;UACA;UACAG;YACAC;YACAC;UACA;QACA;UACAH;UACA;UACA;QACA;MACA;QACAA;MACA;IACA;;IACA;MACA;QACAJ;UACAC;UACAC;YAAA;UAAA;UACA;QACA;UACAE;UACA;UACA;QACA;MACA;QACAA;MACA;IACA;EACA;;EACAI;IACA;EACA;EACAC;IACA;EACA;AACA","names":["data","annunciUtente","computed","methods","fetch","method","headers","then","console","body","titolo","visibile","updated","created"],"sourceRoot":"src/views","sources":["modificaAnnunci.vue"],"sourcesContent":["<template>\n    <v-card>\n        <v-list>\n            <v-list-item>\n                <v-list-item-content>\n                    <v-row>\n                        <v-col>\n                            NOME ANNUNCIO\n                        </v-col>                  \n                        <v-col>\n                            VISIBILE\n                        </v-col>\n                        <v-col>\n                            <v-spacer></v-spacer>\n                        </v-col>\n                    </v-row>\n                </v-list-item-content>\n            </v-list-item>\n            <v-list-item v-for=\"annuncio in annunciUtente\" :key=\"annuncio.titolo\">\n                <v-list-item-content>\n                    <v-row>\n                        <v-col>\n                            {{ annuncio.titolo }}\n                        </v-col>                    \n                        <v-col>\n                            <v-row dense>\n                                <v-col v-if=\"annuncio.visibile\">\n                                    Si\n                                </v-col>\n                                <v-col v-else>\n                                    No\n                                </v-col> \n                                <v-col v-if=\"annuncio.visibile === true\">\n                                    <v-btn block color=\"orange\" rounded @click=\"aggiornaVisbilita(annuncio, false)\">Nascondi</v-btn>\n                                </v-col>\n                                <v-col v-else>\n                                    <v-btn block color=\"green\" rounded @click=\"aggiornaVisbilita(annuncio, true)\">Rendi Visibile</v-btn>\n                                </v-col>\n                                <v-col>\n                                    <v-btn block color=\"red\" rounded @click=\"elimina(annuncio)\">Elimina</v-btn>\n                                </v-col>\n                            </v-row>\n                        </v-col>\n                    </v-row>\n                </v-list-item-content>\n            </v-list-item>\n        </v-list>\n    </v-card>\n</template>\n\n<script>\n\nexport default {\n    data() {\n        return {\n            annunciUtente: []\n        }\n    },\n    computed: {\n\n    },\n    methods: {\n        async getAnnunciUtente() {\n            try {\n                fetch(this.$url + \"api/a/getau/\" + this.$store.state.datiUtente.username, {\n                    method: 'GET',\n                    headers: { \"Content-Type\": \"application/json\" }\n                }).then((resp) => resp.json())\n                    .then(data => {\n                        this.annunciUtente = data;\n                        console.log(data);\n                    })\n            } catch (error) {\n                console.error(error);\n            }\n        },\n        async aggiornaVisbilita (annuncio, visibilePassato) {\n            try {\n                fetch(this.$url + \"api/a/updatea\", {\n                    method: 'PATCH',\n                    headers: { \n                        \"Content-Type\": \"application/json\",\n                        \"x-access-token\": this.$store.state.dataAuth.token\n                    },\n                    body: JSON.stringify({\n                        titolo: annuncio.titolo,\n                        visibile: visibilePassato\n                    })\n                }).then( () => {\n                    console.log(\"Visibilià aggiornata per \", annuncio.titolo, \"!\")\n                    this.contaAnnunciOnline(this.$store.state.datiUtente.username);\n                    this.getProfile();\n                })\n            } catch (error) {\n                console.error(error); // If there is any error you will catch them here\n            }\n        },\n        async elimina(annuncio) {\n            try {\n                fetch(this.$url + \"api/a/deletea/\" + annuncio.titolo, {\n                    method: 'DELETE',\n                    headers: { \"Content-Type\": \"application/json\" },\n                    // body: JSON.stringify({ id: id }),\n                }).then( () => {\n                    console.log(\"Annuncio con titolo\", annuncio.titolo, \" è stato eliminato!\")\n                    this.contaAnnunciOnline(this.$store.state.datiUtente.username);\n                    this.getProfile();\n                })\n                } catch(error) {\n                    console.error(error); // If there is any error you will catch them here\n                }\n        }\n    },\n    updated() {\n        this.getAnnunciUtente();\n    },\n    created() {\n      this.getAnnunciUtente();  \n    },\n}\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}