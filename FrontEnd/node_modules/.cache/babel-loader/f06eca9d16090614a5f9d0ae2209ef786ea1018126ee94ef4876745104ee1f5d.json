{"ast":null,"code":"import { mapState } from \"vuex\";\nexport default {\n  data() {\n    return {\n      annunci: [],\n      localCat: '',\n      endpoint: '',\n      cat: '',\n      method: '',\n      isEmpty: false,\n      API_URL: 'http://localhost:8080/api/a/'\n    };\n  },\n  computed: mapState({\n    cate: state => state.category\n  }),\n  methods: {\n    async getfa() {\n      try {\n        fetch(this.endpoint, {\n          method: 'POST',\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            categoria: this.cat\n          })\n        }).then(resp => resp.json()).then(data => {\n          // Here you get the data to modify as you please\n\n          this.annunci = data;\n          if (this.annunci[0] === undefined) this.isEmpty = true;\n          return;\n        });\n      } catch (error) {\n        console.error(error); // If there is any error you will catch them here\n      }\n    },\n\n    async getAll() {\n      try {\n        console.log(this.endpoint);\n        fetch(this.endpoint, {\n          method: 'GET',\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(resp => resp.json()).then(data => {\n          // Here you get the data to modify as you please\n          this.annunci = data;\n          if (this.annunci[0] === undefined) this.isEmpty = true;\n          return;\n        });\n      } catch (error) {\n        console.error(error); // If there is any error you will catch them here\n      }\n    },\n\n    onInput() {\n      this.cat = this.$refs.input.value;\n      this.$store.commit('selectCat', this.localCat);\n    }\n  },\n  created() {\n    this.cat = this.$store.state.category;\n    console.log(\"La categoria è: \", this.cat);\n    if (this.cat === '') {\n      this.endpoint = this.API_URL + 'getAll';\n      this.method = 'GET';\n      this.getAll();\n      //if (this.annunci)\n    } else {\n      this.endpoint = this.API_URL + 'getaf';\n      this.method = 'POST';\n      this.getfa();\n    }\n    this.$store.commit('isResultView', true);\n  }\n};","map":{"version":3,"mappings":"AA8BA;AAGA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;EACA;EAGAC;IACA;MACA;QACAC;UACAN;UACAO;YAAA;UAAA;UACAC;YAAAC;UAAA;QACA,6BACAC;UACA;;UAEA;UACA;UACA;QACA;MACA;QACAC;MACA;IACA;;IACA;MACA;QACAA;QACAL;UACAN;UACAO;YAAA;UAAA;QACA,6BACAG;UACA;UACA;UACA;UACA;QACA;MACA;QACAC;MACA;IACA;;IAEAC;MACA;MACA;IACA;EACA;EACAC;IACA;IACAF;IACA;MACA;MACA;MACA;MACA;IACA;MACA;MACA;MACA;IACA;IACA;EACA;AACA","names":["data","annunci","localCat","endpoint","cat","method","isEmpty","API_URL","computed","cate","methods","fetch","headers","body","categoria","then","console","onInput","created"],"sourceRoot":"src/views","sources":["SearchResults.vue"],"sourcesContent":["<template>\n    <div class=\"searchresults\">\n        <v-container>\n\n            <h1>Risultati ricerca {{ cate }}</h1>\n            <input type=\"text\" ref=\"input\">\n            <v-btn @click=\"onInput\"> ok </v-btn>\n            <h2>{{ $store.state.category }}</h2>\n        </v-container>\n        <v-card class=\"mx-auto justify-center\" max-width=\"1000\">\n            <v-container v-if=\"!isEmpty\" fluid>\n                <v-row dense>\n                    <v-col v-for=\"annuncio in annunci\" :key=\"annuncio._id\" :cols=\"4\">\n                        <v-card flat @click=\"selectCat(category.title)\">\n                            <v-img rounded :src=\"require('../assets/vuoto.webp')\" class=\"white--text align-end\" contain>\n                            </v-img>\n                            <span class=\"secondary right\">{{ annuncio.titolo }}</span>\n                            <span clas=\"secondary\"> {{ annuncio.prezzo }}</span>\n                            <v-spacer></v-spacer>\n                        </v-card>\n                    </v-col>\n                </v-row>\n            </v-container>\n            <h1 v-else>Non sono presenti risultati.</h1>\n        </v-card>\n    </div>\n\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n\n\nexport default {\n    data () {\n        return {\n            annunci: [],\n            localCat: '',\n            endpoint: '',\n            cat: '',\n            method: '',\n            isEmpty: false,\n            API_URL: 'http://localhost:8080/api/a/'\n        }\n    },\n    computed:  mapState({\n       cate: state => state.category\n    }),\n\n\n    methods: {\n        async getfa() {\n            try {\n                fetch(this.endpoint, {\n                    method: 'POST',\n                    headers: { \"Content-Type\": \"application/json\" },\n                    body: JSON.stringify({ categoria: this.cat }),\n                }).then((resp) =>resp.json())\n                .then(data => {\n                  // Here you get the data to modify as you please\n\n                this.annunci = data\n                if (this.annunci[0] === undefined) this.isEmpty=true; \n                  return;\n                })\n                } catch(error) {\n                    console.error(error); // If there is any error you will catch them here\n                }\n        },\n        async getAll() {\n            try {\n                console.log(this.endpoint)\n                fetch(this.endpoint, {\n                    method: 'GET',\n                    headers: { \"Content-Type\": \"application/json\" }\n                }).then((resp) =>resp.json())\n                .then(data => {\n                  // Here you get the data to modify as you please\n                this.annunci = data\n                if (this.annunci[0] === undefined) this.isEmpty=true; \n                  return;\n                })\n                } catch(error) {\n                    console.error(error); // If there is any error you will catch them here\n                }\n        },\n    \n        onInput() {\n            this.cat = this.$refs.input.value\n            this.$store.commit('selectCat', this.localCat)\n        }\n    },\n    created() {\n        this.cat = this.$store.state.category;\n        console.log(\"La categoria è: \", this.cat)\n        if (this.cat === '') {\n            this.endpoint = this.API_URL+'getAll'\n            this.method = 'GET'\n            this.getAll();\n            //if (this.annunci)\n        } else {\n            this.endpoint = this.API_URL+'getaf';\n            this.method = 'POST'\n            this.getfa();\n        } \n        this.$store.commit('isResultView', true)           \n    }    \n}\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}