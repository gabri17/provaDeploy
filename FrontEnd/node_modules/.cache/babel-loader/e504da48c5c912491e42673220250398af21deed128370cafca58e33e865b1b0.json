{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data: () => ({\n    vendita: false,\n    affitto: false,\n    valid: false,\n    selectCat: null,\n    categories: [],\n    costoH: '',\n    costoG: '',\n    costoS: '',\n    costoVen: '',\n    range: {\n      start: '',\n      end: ''\n    },\n    periodoNonDisponibile: [],\n    titolo: '',\n    descrizione: '',\n    indirizzo: '',\n    annuncioSalvato: false,\n    erroreAnnuncio: false,\n    message: '',\n    requiredAff: [v => !!v && this.affitto || 'Campo obbligatorio'],\n    requiredVen: [v => !!v && this.vendita || 'Campo obbligatorio'],\n    required: [v => !!v || 'Campo obbligatorio'],\n    titoloRule: [v => v.length <= 40 || 'Il titolo non può superare i 40 caratteri!'],\n    descrizioneRule: [v => v.length <= 350 || 'Il titolo non può superare i 40 caratteri!']\n  }),\n  methods: {\n    async salvaAnnuncio() {\n      console.log(this.$store.getters.token);\n      try {\n        fetch(this.$url + \"api/a/savea\", {\n          method: 'POST',\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-access-token\": this.$store.getters.token\n          },\n          body: JSON.stringify({\n            inserzionista: this.$store.state.datiUtente.username,\n            titolo: this.titolo,\n            descrizione: this.descrizione,\n            dataPubblicazione: this.today(),\n            modalitaTransazione: this.vendita ? \"Vendita\" : \"Affitto\",\n            categoria: this.selectCat,\n            indirizzo: this.indirizzo,\n            pagamentoOnline: this.pagamentoOnline,\n            contoPaypall: this.contoPayPal,\n            prezzo: this.costoVen,\n            prezzoAffittoAlGiorno: this.costoG,\n            prezzoAffittoSettimanale: this.costoS,\n            prezzoAffittoAllOra: this.costoH\n          })\n        }).then(resp => resp.json()).then(data => {\n          console.log(data);\n          if (data.success === false) {\n            this.message = data.message;\n            this.erroreAnnuncio = true;\n            return;\n          }\n          this.annuncioSalvato = true;\n          //this.$refs.form.reset();\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    today() {\n      var today = new Date();\n      var dd = String(today.getDate()).padStart(2, '0');\n      var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n      var yyyy = today.getFullYear();\n      return yyyy + \"/\" + mm + \"/\" + dd;\n    }\n  },\n  mounted() {\n    if (this.$store.state.dataAuth.success == false) {\n      this.$router.push(\"/userloginsignup\");\n    }\n  },\n  created() {\n    this.$categories.forEach(v => this.categories.push(v.title));\n  }\n};","map":{"version":3,"mappings":";AAyNA;EACAA;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;MACAC;MACAC;IACA;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC,cACAC,iDACA;IACAC,cACAD,iDACA;IACAE,WACAF,iCACA;IACAG,aACAH,oEACA;IACAI,kBACAJ;EAEA;EACAK;IACA;MACAC;MACA;QACAC;UACAC;UACAC;YACA;YACA;UAAA;UACAC;YACAC;YACAlB;YACAC;YACAkB;YACAC;YACAC;YACAnB;YACAoB;YACAC;YACAC;YACAC;YACAC;YACAC;UACA;QACA,6BACAC;UACAf;UACA;YACA;YACA;YACA;UACA;UACA;UACA;QACA;MACA;QACAA;MACA;IACA;IACAgB;MACA;MACA;MACA;MACA;MACA;IACA;EAEA;EACAC;IACA;MACA;IACA;EAEA;EACAC;IACA;EACA;AAGA","names":["data","vendita","affitto","valid","selectCat","categories","costoH","costoG","costoS","costoVen","range","start","end","periodoNonDisponibile","titolo","descrizione","indirizzo","annuncioSalvato","erroreAnnuncio","message","requiredAff","v","requiredVen","required","titoloRule","descrizioneRule","methods","console","fetch","method","headers","body","inserzionista","dataPubblicazione","modalitaTransazione","categoria","pagamentoOnline","contoPaypall","prezzo","prezzoAffittoAlGiorno","prezzoAffittoSettimanale","prezzoAffittoAllOra","then","today","mounted","created"],"sourceRoot":"src/views","sources":["PubblicaAnnuncio.vue"],"sourcesContent":["<template>\n  <v-container>\n  <h1 justify=\"center\" align=\"center\"> Nuovo Annuncio</h1>\n  <v-form v-model=\"valid\" class=\"submit\">\n    <v-text-field \n    ma=\"auto\" \n    filled \n    dense \n    rounded \n    v-model=\"titolo\" \n    id=\"titolo\" \n    label=\"Titolo Annuncio\" \n    name=\"titolo\"\n    type=\"text\" \n    color=\"accent accent-3\" \n    :counter=\"40\" \n    :rules=\"required.concat(titoloRule)\" />\n  \n    <v-select \n    filled \n    dense \n    rounded \n    v-model=\"selectCat\" \n    :items=\"categories\" \n    :rules=\"[v => !!v || 'Item is required']\"\n    label=\"Categoria\" \n    required></v-select>\n  \n    <v-textarea \n    v-model=\"descrizione\" \n    id=\"descrizione\" \n    name=\"descrizione\" \n    label=\"Descrizione\"\n    color=\"accent accent-3\" \n    :rules=\"required.concat(descrizioneRule)\" \n    :counter=\"350\" \n    no-resize \n    filled \n    dense \n    rounded \n    auto-grow></v-textarea>\n    \n    <v-text-field \n    v-model=\"indirizzo\" \n    id=\"indirizzo\" \n    label=\"Indirizzo di ritiro\" \n    name=\"indirizzo\" \n    type=\"text\" \n    color=\"accent accent-3\"\n    :rules=\"required.concat(titoloRule)\"\n    filled \n    dense \n    rounded />\n\n    \n    <v-checkbox \n      v-model= \"affitto\" \n      :disable=\"vendita\"\n      label=\"affitto\"\n      color=\"indigo\"\n      hide-details\n      large\n      @click=\"vendita = false\"\n    ></v-checkbox>\n    <v-checkbox \n      v-model= \"vendita\" \n      :disable=\"affitto\"\n      label=\"vendita\"\n      color=\"indigo\"\n      value=\"indigo\"\n      hide-details\n      large\n      @click=\"affitto = false\"\n    ></v-checkbox>\n    <v-container\n      \n\n    v-if=\"!vendita && affitto\"\n    >\n    <v-row ma = \"auto\">\n\n      <v-col :cols=\"3\">\n        <v-text-field\n        v-model=\"costoH\"\n        id=\"costoH\"\n        label=\"Costo all'ora?\"\n        name=\"costoH\"\n        type=\"text\"\n        color=\"accent accent-3\"\n        :rules= \"requiredAff\"\n        filled\n        dense\n        rounded      \n        />\n      </v-col>\n\n      <v-col :cols=\"3\">\n      <v-text-field\n        v-model=\"costoG\"\n        id=\"costoG\"\n        label=\"Costo al giorno?\"\n        name=\"costoG\"\n        type=\"text\"\n        color=\"accent accent-3\"\n        :rules= \"requiredAff\"\n        filled\n        dense\n        rounded      \n        />\n      </v-col>\n\n      <v-col :cols=\"3\">\n      <v-text-field\n        v-model=\"costoS\"\n        id=\"costoS\"\n        label=\"Costo alla settimana?\"\n        name=\"costoS\"\n        type=\"text\"\n        color=\"accent accent-3\"\n        :rules= \"requiredAff\"     \n        filled\n        dense\n        rounded      \n        />\n      </v-col>\n\n    </v-row>\n    <!-- <v-row>\n      <v-col>\n      <v-btn  rounded align=\"center\" justify=\"center\">\n        Aggiungi Date Non Diponibili\n      </v-btn>\n    </v-col>\n      <v-col :col=\"2\">\n        <v-text-field\n        v-model=\"range.start\"\n        id=\"startdate\"\n        label=\"startDate\"\n        name=\"startDate\"\n        type=\"date\"\n        color=\"accent accent-3\"\n        \n        filled\n        dense\n        rounded      \n        />\n      </v-col>\n      <v-col :col=\"2\">\n        <v-text-field\n        v-model=\"range.end\"\n        id=\"startdate\"\n        label=\"startDate\"\n        name=\"startDate\"\n        type=\"date\"\n        color=\"accent accent-3\"\n       \n        filled\n        dense\n        rounded      \n        />\n      </v-col>\n      </v-row> -->\n    </v-container>\n\n\n    <v-container\n    v-if=\"!affitto && vendita\" \n    >\n      <v-row>        \n        <v-col :cols=\"3\" ma=\"auto\">\n          <v-text-field\n          v-model=\"costoVen\"\n          id=\"costoVen\"\n          label=\"Prezzo di Vendita?\"\n          name=\"costoVen\"\n          type=\"text\"\n          color=\"accent accent-3\"\n          filled\n          dense\n          rounded      \n          />\n        </v-col>\n      </v-row>\n    </v-container>\n    <!-- <v-container>\n\n      <v-row>\n        <v-col :col=\"1\" ma=\"auto\">\n          <v-file-input \n          label=\"Image input\"\n          filled\n          prepend-icon=\"mdi-camera\"\n          >\n        </v-file-input>\n  \n        </v-col>\n      </v-row>\n    </v-container> -->\n    <v-spacer></v-spacer>\n    <v-container>\n      \n      <v-btn class=\"submit\" rounded color=\"accent accent-3\" dark @click=\"salvaAnnuncio\" :disabled=\"!valid\">Pubblica Annuncio</v-btn>\n      \n    </v-container>\n  </v-form>\n  <v-container>\n    <v-alert v-if=\"annuncioSalvato\" type=\"success\" justify=\"center\">\n      Annuncio salvato correttamente!\n    </v-alert>\n    <v-alert v-if=\"erroreAnnuncio\" type=\"error\" justify=\"center\">\n      {{ message }}\n    </v-alert>\n  </v-container>\n  </v-container>\n</template>\n  \n<script>\nexport default {\n  data:  () => ({\n      vendita: false,\n      affitto: false,\n      valid: false,\n      selectCat: null,\n      categories:[],\n      costoH: '',\n      costoG: '',\n      costoS:'',\n      costoVen:'',\n      range: {\n        start: '',\n        end: '',\n      },\n      periodoNonDisponibile: [],\n      titolo: '',\n      descrizione: '',\n      indirizzo: '',\n      annuncioSalvato: false,\n      erroreAnnuncio: false,\n      message: '',\n      requiredAff: [\n        v => !!v && this.affitto || 'Campo obbligatorio'\n      ],\n      requiredVen: [\n        v => !!v && this.vendita || 'Campo obbligatorio'\n      ],\n      required: [\n        v => !!v || 'Campo obbligatorio'\n      ],\n      titoloRule: [\n        v => v.length <= 40 || 'Il titolo non può superare i 40 caratteri!'\n      ],\n      descrizioneRule: [\n        v => v.length <= 350 || 'Il titolo non può superare i 40 caratteri!'\n      ]\n    }),\n    methods: {\n      async salvaAnnuncio() {\n          console.log(this.$store.getters.token)\n        try {\n          fetch(this.$url + \"api/a/savea\", {\n            method: 'POST',\n            headers: { \n              \"Content-Type\": \"application/json\", \n              \"x-access-token\": this.$store.getters.token},\n            body: JSON.stringify({ \n              inserzionista: this.$store.state.datiUtente.username, \n              titolo: this.titolo, \n              descrizione: this.descrizione,\n              dataPubblicazione: this.today(),\n              modalitaTransazione: this.vendita ? \"Vendita\" : \"Affitto\", \n              categoria: this.selectCat,\n              indirizzo: this.indirizzo, \n              pagamentoOnline: this.pagamentoOnline,\n              contoPaypall: this.contoPayPal,\n              prezzo: this.costoVen,\n              prezzoAffittoAlGiorno: this.costoG,\n              prezzoAffittoSettimanale: this.costoS,\n              prezzoAffittoAllOra: this.costoH,\n            })\n          }).then((resp) => resp.json())\n            .then(data => {\n              console.log(data);\n              if (data.success === false) {\n                this.message = data.message;\n                this.erroreAnnuncio = true;\n                return;\n              }\n              this.annuncioSalvato = true;\n              //this.$refs.form.reset();\n            })\n        } catch (error) {\n          console.error(error);\n        }\n      },\n      today() {\n        var today = new Date();\n        var dd = String(today.getDate()).padStart(2, '0');\n        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n        var yyyy = today.getFullYear();\n        return yyyy + \"/\" + mm + \"/\" + dd; \n      }\n        \n  },\n  mounted() {\n    if(this.$store.state.dataAuth.success == false) {\n      this.$router.push(\"/userloginsignup\")\n    }\n  \n},  \ncreated() {\n    this.$categories.forEach(v => this.categories.push(v.title));\n  },\n\n\n}\n\n\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}