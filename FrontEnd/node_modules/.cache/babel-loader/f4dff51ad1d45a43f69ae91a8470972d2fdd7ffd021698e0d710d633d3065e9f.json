{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport logoLinkHome from '@/components/logoLinkHome';\nimport MenuProfilo from '@/components/menuProfilo';\nimport { mapState } from 'vuex';\nexport default {\n  data() {\n    return {\n      categories: [],\n      selectCat: this.$store.state.category,\n      filtri: false,\n      ordinaData: false,\n      ascData: false,\n      ordinaPrezzo: false,\n      ascPrezzo: false,\n      ordinaRating: true,\n      affitto: false,\n      vendita: false,\n      categoriaSelezionata: '',\n      keyword: '',\n      filterMin: 0,\n      filterMax: 0,\n      priceMax: 999999,\n      euro: new Intl.NumberFormat('en-DE', {\n        style: 'currency',\n        currency: 'EUR'\n      })\n    };\n  },\n  components: {\n    logoLinkHome,\n    MenuProfilo\n  },\n  methods: {\n    findMaxPrice() {\n      return Math.max.apply(Math, this.annunci.map(function (o) {\n        if (o.prezzo === undefined) {\n          return 0;\n        }\n        return o.prezzo;\n      }));\n    },\n    filtraggio(x) {\n      var ok = true;\n      if (this.affitto && x.modalitaTransazione !== 'Affitto') ok = false;\n      if (!this.affitto && x.modalitaTransazione === 'Affitto') ok = false;\n      if (this.vendita && x.modalitaTransazione !== 'Vendita') ok = false;\n      if (!this.vendita && x.modalitaTransazione === 'Vendita') ok = false;\n      if (x.prezzo < this.filterMin) ok = false;\n      if (x.prezzo > this.filterMax) ok = false;\n      if (this.categoriaSelezionata !== '' && x.categoria !== this.categoriaSelezionata) ok = false;\n      return ok;\n    },\n    ordinamento() {\n      if (this.ordinaPrezzo && this.ascPrezzo) return 'm1';\n      if (this.ordinaPrezzo && !this.ascPrezzo) return 'm2';\n      if (this.ordinaData && this.ascData) return 'd1';\n      if (this.ordinaData && !this.ascData) return 'd2';\n    },\n    async applicaFiltri() {\n      try {\n        console.log(this.endpoint);\n        fetch(this.$url + \"api/a/ordina/\" + this.ordinamento(), {\n          method: 'GET',\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(resp => resp.json()).then(data => {\n          // Here you get the data to modify as you please\n          this.$store.state.annunci = data.filter(a => a.visibile === true);\n          if (this.$store.state.annunci[0] === undefined) this.isEmpty = true;\n          return;\n        });\n      } catch (error) {\n        console.error(error); // If there is any error you will catch them here\n      }\n\n      this.$store.state.annunci = this.$store.state.annunci.filter(this.filtraggio);\n      if (this.ordinaData) {\n        console.log(this.$store.state.annunci);\n        this.$store.state.annunci.sort((a, b) => a.dataPubblicazione > b.dataPubblicazione);\n      } else if (this.ordinaPrezzo) {\n        this.$store.state.annunci.sort((a, b) => a.prezzo > b.prezzo);\n      } else {\n        this.$store.state.annunci.sort((a, b) => a.rating > b.rating);\n      }\n    }\n  },\n  computed: mapState({\n    search: state => state.search,\n    username: state => state.username,\n    utenteLoggato: state => state.dataAuth.success,\n    cate: state => state.category,\n    annunci: state => state.annunci\n  }),\n  created() {\n    this.$categories.forEach(v => this.categories.push(v.title));\n    this.categoriaSelezionata = this.$store.state.category;\n    this.priceMax = this.findMaxPrice();\n  },\n  updated() {\n    this.priceMax = this.findMaxPrice();\n    if (this.filterMin > this.filterMax) {\n      this.filterMax = this.filterMin;\n    }\n  }\n};","map":{"version":3,"mappings":";AAyIA;AACA;AACA;AACA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC,MACA;QACAC;QACAC;MACA;IACA;EACA;EACAC;IAAAC;IAAAC;EAAA;EACAC;IACAC;MACA;QACA;UACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IACA;MACA;QACAC;QACAC;UACAC;UACAC;YAAA;UAAA;QACA,6BACAC;UACA;UACA;UACA;UACA;QACA;MACA;QACAJ;MACA;;MAEA;MACA;QACAA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;EACA;EACAK;IACAC;IACAC;IACAC;IACAC;IACAC;EAEA;EACAC;IACA;IACA;IACA;EACA;EACAC;IACA;IACA;MACA;IACA;EACA;AACA","names":["data","categories","selectCat","filtri","ordinaData","ascData","ordinaPrezzo","ascPrezzo","ordinaRating","affitto","vendita","categoriaSelezionata","keyword","filterMin","filterMax","priceMax","euro","style","currency","components","logoLinkHome","MenuProfilo","methods","findMaxPrice","filtraggio","ordinamento","console","fetch","method","headers","then","computed","search","username","utenteLoggato","cate","annunci","created","updated"],"sourceRoot":"src/components","sources":["MyNavbar.vue"],"sourcesContent":["<template>\n    <nav>\n        <v-app-bar v-if=\"!this.$store.state.noNavBar\"\n        height=\"100\"\n        app\n        flat\n        class=\"primary\">\n        \n\n            <v-app-bar-nav-icon v-if=\"search==true\" @click=\"filtri=!filtri\" >  </v-app-bar-nav-icon>\n            <v-spacer v-if=\"search==true\" ></v-spacer>\n        \n            <v-toolbar-title mx-auto>\n                <logoLinkHome/>\n            </v-toolbar-title>\n\n            <v-spacer></v-spacer>\n            <router-link v-if=\"this.$store.state.dataAuth.success === false\" to=\"/userloginsignup\">\n                <v-btn \n                rounded \n                depressed \n                class=\"grey lighten-5 text-lowercase\">\n                <span>login or signup</span>\n                <v-icon>mdi-login</v-icon>\n            </v-btn>\n        </router-link>\n\n        <MenuProfilo v-if=\"this.$store.state.dataAuth.success === true\"/>\n\n    </v-app-bar>\n        <v-navigation-drawer v-if=\"search\" v-model=\"filtri\" app class =\"primary\" >\n            <h1 justify=\"center\" align=\"center\">FILTRI</h1>\n            <v-container>\n            <v-row dense>\n            \n                <v-spacer></v-spacer>\n                <v-text-field v-model=\"keyword\" class=\"d-inline-flex pa-2\" placeholder=\"ricerca\" filled dense\n                    rounded append-icon=\"mdi-magnify\" @keyup.enter=\"ricercakw\"></v-text-field>\n                <v-spacer></v-spacer>\n            </v-row>\n        </v-container>\n            <h4>Ordina per: </h4>\n            <v-list>\n          <v-list-item>\n            <v-list-item-action>\n              <v-switch\n                color=\"indigo\"\n                v-model=\"ordinaData\"\n                @click=\"ordinaRating=false; ordinaPrezzo=false\"\n              ></v-switch>\n            </v-list-item-action>\n            <v-list-item-title>data</v-list-item-title>\n            <v-checkbox\n            v-model=\"ascData\"\n            on-icon=\"mdi-sort-numeric-descending\"\n            off-icon=\"mdi-sort-numeric-ascending\"\n            label=\"verso\"\n            color=\"indigo\">\n            </v-checkbox>\n          </v-list-item>\n\n\n          <v-list-item>\n            <v-list-item-action>\n              <v-switch\n                color=\"indigo\"\n                v-model=\"ordinaPrezzo\"\n                @click=\"ordinaRating=false; ordinaData=false\"\n              ></v-switch>\n            </v-list-item-action>\n            <v-list-item-title>prezzo</v-list-item-title>\n            <v-checkbox\n            v-model=\"ascPrezzo\"\n            on-icon=\"mdi-sort-numeric-descending\"\n            off-icon=\"mdi-sort-numeric-ascending\"\n            label=\"verso\"\n            color=\"indigo\">\n            </v-checkbox>\n          </v-list-item>\n\n          <v-list-item>\n            <v-list-item-action>\n              <v-switch\n                color=\"indigo\"\n                v-model=\"ordinaRating\"\n                @click=\"ordinaPrezzo=false; ordinaData=false\"\n              ></v-switch>\n            </v-list-item-action>\n            <v-list-item-title>rating</v-list-item-title>\n          </v-list-item>\n        </v-list>\n          <v-select class=\"d-inline-flex pa-2\" filled dense rounded :items=\"categories\" :value=\"categoriaSelezionata\" @on-change=\"this.$store.commit('selectCat', this.localCat)\"\n          label=\"Categoria\" required v-model=\"categoriaSelezionata\"></v-select>\n\n            <v-slider\n            label=\"min\"\n            v-model=\"filterMin\"\n            min = \"0\"\n            :max=priceMax\n            color=\"indigo\"\n            >\n        </v-slider>\n\n        <v-slider\n            label=\"max\"\n            v-model=\"filterMax\"\n            min = \"0\"\n            :max=priceMax\n            color=\"indigo\"\n            >\n        </v-slider>\n        <div>\n            Prezzo min: {{ euro.format(filterMin) }}\n        </div>\n        <div>\n            Prezzo max: {{ euro.format(filterMax) }}\n        </div>\n        <v-container>\n            <v-checkbox\n            v-model=\"affitto\"\n            label=\"affitto\"\n            color=\"indigo\">\n            </v-checkbox>\n            <v-checkbox\n            v-model=\"vendita\"\n            label=\"vendita\"\n            color=\"indigo\">\n            </v-checkbox>\n        </v-container>\n    <v-spacer></v-spacer>\n    <v-btn block rounded @click=\"applicaFiltri\">Applica filtri</v-btn>          \n        </v-navigation-drawer>\n    </nav>\n</template>\n\n\n<script>\nimport logoLinkHome from '@/components/logoLinkHome'\nimport MenuProfilo from '@/components/menuProfilo';\nimport { mapState } from 'vuex';\nexport default {\n    data() {\n        return {\n            categories:[],\n            selectCat: this.$store.state.category,\n            filtri: false,\n            ordinaData: false,\n            ascData: false,\n            ordinaPrezzo: false,\n            ascPrezzo: false,\n            ordinaRating: true,\n            affitto: false,\n            vendita: false,\n            categoriaSelezionata: '',\n            keyword: '',\n            filterMin: 0,\n            filterMax: 0,\n            priceMax: 999999,\n            euro:  \n                 new Intl.NumberFormat('en-DE', {\n                     style: 'currency',\n                     currency: 'EUR',\n                 })\n        }\n    },    \n    components: { logoLinkHome, MenuProfilo },  \n    methods: {\n        findMaxPrice() {\n            return Math.max.apply(Math, this.annunci.map(function(o) { \n              if (o.prezzo === undefined) {\n                return 0;\n              }\n              return o.prezzo; \n            }))\n        },\n        filtraggio(x) {\n          var ok = true;\n          if (this.affitto && x.modalitaTransazione !== 'Affitto') ok = false\n          if (!this.affitto && x.modalitaTransazione === 'Affitto') ok = false\n          if (this.vendita && x.modalitaTransazione !== 'Vendita') ok = false\n          if (!this.vendita && x.modalitaTransazione === 'Vendita') ok = false\n          if (x.prezzo < this.filterMin) ok = false\n          if (x.prezzo > this.filterMax) ok = false\n          if (this.categoriaSelezionata !== '' && x.categoria !== this.categoriaSelezionata) ok = false\n          return ok;\n        },\n        ordinamento() {\n          if(this.ordinaPrezzo && this.ascPrezzo) return 'm1';\n          if(this.ordinaPrezzo && !this.ascPrezzo) return 'm2';\n          if(this.ordinaData && this.ascData) return 'd1';\n          if(this.ordinaData && !this.ascData) return 'd2';\n        },\n        async applicaFiltri() {\n          try {\n                console.log(this.endpoint)\n                fetch(this.$url + \"api/a/ordina/\" + this.ordinamento(), {\n                    method: 'GET',\n                    headers: { \"Content-Type\": \"application/json\" }\n                }).then((resp) =>resp.json())\n                .then(data => {\n                  // Here you get the data to modify as you please\n                this.$store.state.annunci = data.filter(a => a.visibile === true)\n                if (this.$store.state.annunci[0] === undefined) this.isEmpty=true; \n                  return;\n                })\n                } catch(error) {\n                    console.error(error); // If there is any error you will catch them here\n                }\n            \n            this.$store.state.annunci = this.$store.state.annunci.filter(this.filtraggio);\n            if(this.ordinaData) {\n              console.log(this.$store.state.annunci)\n              this.$store.state.annunci.sort((a,b) => a.dataPubblicazione > b.dataPubblicazione)  \n            } else if (this.ordinaPrezzo) {\n              this.$store.state.annunci.sort((a,b) => a.prezzo > b.prezzo)\n            } else {\n              this.$store.state.annunci.sort((a,b) => a.rating > b.rating)\n            }\n        }\n    },\n    computed:  mapState({\n       search: state => state.search,\n       username: state => state.username,\n       utenteLoggato: state => state.dataAuth.success,\n       cate: state => state.category,\n       annunci: state => state.annunci,\n       \n    }),\n    created() {\n    this.$categories.forEach(v => this.categories.push(v.title));\n    this.categoriaSelezionata = this.$store.state.category\n    this.priceMax = this.findMaxPrice()\n  },\n  updated() {\n    this.priceMax = this.findMaxPrice()\n    if(this.filterMin > this.filterMax) {\n        this.filterMax = this.filterMin;\n    }\n  }\n}\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}