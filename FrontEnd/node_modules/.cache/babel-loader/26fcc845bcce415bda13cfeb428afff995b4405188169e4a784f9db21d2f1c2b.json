{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapState } from 'vuex';\nexport default {\n  data: () => ({\n    fav: true,\n    menu: false,\n    message: false,\n    hints: true\n  }),\n  methods: {\n    async logout() {\n      console.log(this.$store.state.datiUtente.token);\n      try {\n        fetch(\"http://localhost:8080/api/l/logout\", {\n          method: 'GET',\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-access-token\": this.$store.getters.token\n          }\n        }).then(resp => resp.json()).then(data => {\n          console.log(data);\n          this.$store.commit('resetState', this.$store.state);\n          // DEBUG\n          //console.log(this.$store.state)\n          this.$router.push('/');\n        });\n      } catch (error) {\n        console.error(error); // If there is any error you will catch them here\n      }\n    },\n\n    async stampaWL() {\n      try {\n        fetch(this.$url + \"api/a/getAll\", {\n          method: 'GET',\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(resp => resp.json()).then(data => {\n          this.$store.state.annunci = data;\n          if (this.$store.state.annunci[0] === undefined) {\n            this.isEmpty = true;\n            this.message = this.$store.state.annunci.message;\n            return;\n          }\n          console.log(\"ciao\");\n          this.$store.state.dallaWL = true;\n          this.$store.state.annunci = this.$store.state.annunci.filter(a => a.visibile === true);\n          this.$store.state.annunci = this.$store.state.annunci.filter(a => a.inserzionista !== this.$store.state.datiUtente.username);\n          this.$store.state.annunci = this.$store.state.annunci.filter(a => this.$store.state.profiloUtente.whishList.includes(a._id));\n          this.$router.push('/searchResults');\n        });\n      } catch (error) {\n        console.error(error); // If there is any error you will catch them here\n      }\n    }\n  },\n\n  computed: mapState({\n    datiUtente: state => state.datiUtente\n  })\n};","map":{"version":3,"mappings":";AA6FA;AAEA;EAEAA;IACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACA;QACAC;UACAC;UACAC;YACA;YACA;UACA;QACA,6BACAC;UACAJ;UAEA;UACA;UACA;UACA;QACA;MACA;QACAA;MACA;IACA;;IACA;MACA;QACAC;UACAC;UACAC;YAAA;UAAA;QACA,6BACAC;UACA;UACA;YACA;YACA;YACA;UACA;UACAJ;UACA;UACA;UACA;UACA;UACA;QACA;MACA;QACAA;MACA;IACA;EAEA;;EACAK;IACAC;EACA;AACA","names":["data","fav","menu","message","hints","methods","console","fetch","method","headers","then","computed","datiUtente"],"sourceRoot":"src/components","sources":["menuProfilo.vue"],"sourcesContent":["<template>\n    <div class=\"text-center\">\n        <v-menu v-model=\"menu\" :close-on-content-click=\"false\" :nudge-width=\"300\" offset-x>\n            <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn color=\"indigo\" dark v-bind=\"attrs\" v-on=\"on\">\n                    {{ datiUtente.username }}\n                </v-btn>\n            </template>\n\n            <v-card>\n                <v-list>\n                    <v-list-item>\n                        <v-list-item-avatar>\n                            <v-icon large>\n                                mdi-account\n                            </v-icon>\n                        </v-list-item-avatar>\n\n                        <v-list-item-content>\n                            <v-list-item-title>{{ datiUtente.nome + \" \" + datiUtente.cognome }}</v-list-item-title>\n                        </v-list-item-content>\n\n                        <v-list-item-action>\n                            <v-btn rounded depressed class=\"grey lighten-5 text-lowercase\" @click=\"logout\">\n                                <span>logout {{ datiUtente.username }}</span>\n                                <v-icon>mdi-logout</v-icon>\n                            </v-btn>\n                        </v-list-item-action>\n                    </v-list-item>\n                </v-list>\n\n                <v-divider></v-divider>\n                <v-card class=\"mx-auto\">\n\n                    <v-list>\n                        <v-list-item-group>\n                            <v-list-item to=\"/modificaDatiPersonali\">\n                                <v-list-item-icon>\n                                    <v-icon>mdi-border-color</v-icon>\n                                </v-list-item-icon>\n                                <v-list-item-content>\n                                <v-list-item-title>Modifica Dati Personali</v-list-item-title>\n                                </v-list-item-content>\n                            </v-list-item>\n                            <v-list-item to=\"/pubblicaannuncio\">\n                                <v-list-item-icon>\n                                    <v-icon>mdi-border-color</v-icon>\n                                </v-list-item-icon>\n                                <v-list-item-content>\n                                    <v-list-item-title>Pubblica Annuncio</v-list-item-title>\n                                </v-list-item-content>\n                            </v-list-item>\n                            <v-list-item  to=\"/modificaAnnunci\">\n                                <v-list-item-icon>\n                                    <v-icon>mdi-border-color</v-icon>\n                                </v-list-item-icon>\n                                <v-list-item-content>\n                                <v-list-item-title>Modifica Annunci</v-list-item-title>\n                                </v-list-item-content>\n                            </v-list-item> \n                            <v-list-item to=\"/recensioniUtente\">\n                                <v-list-item-icon>\n                                    <v-icon>mdi-border-color</v-icon>\n                                </v-list-item-icon>\n                                <v-list-item-content>\n                                <v-list-item-title>Visualizza Recensioni</v-list-item-title>\n                                </v-list-item-content>\n                            </v-list-item>\n                            <v-list-item @click=\"stampaWL\">\n                                <v-list-item-icon>\n                                    <v-icon>mdi-border-color</v-icon>\n                                </v-list-item-icon>\n                                <v-list-item-content>\n                                <v-list-item-title>Whishlist</v-list-item-title>\n                                </v-list-item-content>\n                            </v-list-item>\n                            <v-list-item to=\"/transazioniUtente\">\n                                <v-list-item-icon>\n                                    <v-icon>mdi-border-color</v-icon>\n                                </v-list-item-icon>\n                                <v-list-item-content>\n                                <v-list-item-title>Transazioni</v-list-item-title>\n                                </v-list-item-content>\n                            </v-list-item>\n                        </v-list-item-group>\n                    </v-list>\n                </v-card>\n            </v-card>\n        </v-menu>\n    </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\n\nexport default {\n\n    data: () => ({\n        fav: true,\n        menu: false,\n        message: false,\n        hints: true,\n    }),\n    methods: {\n        async logout() {\n            console.log(this.$store.state.datiUtente.token);\n            try {\n                fetch(\"http://localhost:8080/api/l/logout\", {\n                    method: 'GET',\n                    headers: { \n                      \"Content-Type\": \"application/json\",\n                      \"x-access-token\": this.$store.getters.token\n                    }\n                }).then((resp) =>resp.json())\n                .then(data => {\n                  console.log(data);\n\n                  this.$store.commit('resetState', this.$store.state);\n                  // DEBUG\n                  //console.log(this.$store.state)\n                  this.$router.push('/');\n                })\n                } catch(error) {\n                    console.error(error); // If there is any error you will catch them here\n            }\n        },\n        async stampaWL () {\n            try {\n                fetch(this.$url + \"api/a/getAll\", {\n                    method: 'GET',\n                    headers: { \"Content-Type\": \"application/json\" }\n                }).then((resp) =>resp.json())\n                .then(data => {\n                    this.$store.state.annunci = data;\n                    if (this.$store.state.annunci[0] === undefined) {\n                        this.isEmpty=true; \n                        this.message = this.$store.state.annunci.message;\n                        return;\n                    }\n                    console.log(\"ciao\")\n                    this.$store.state.dallaWL = true;\n                    this.$store.state.annunci = this.$store.state.annunci.filter(a => a.visibile === true)\n                    this.$store.state.annunci = this.$store.state.annunci.filter(a => a.inserzionista !== this.$store.state.datiUtente.username);\n                    this.$store.state.annunci = this.$store.state.annunci.filter(a => this.$store.state.profiloUtente.whishList.includes(a._id));\n                    this.$router.push('/searchResults')    \n                })\n                } catch(error) {\n                    console.error(error); // If there is any error you will catch them here\n                }\n        }\n\n    },\n    computed: mapState({\n        datiUtente: state => state.datiUtente,\n    })\n}\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}